<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="twitter:image" content="https://microsoftedge.github.io/edgevr/assets/img/blog_img/ios/webframes.jpg"><title>iOS Chromium Overlooked and Underappreciated | Microsoft Browser Vulnerability Research</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="iOS Chromium Overlooked and Underappreciated" /><meta name="author" content="Alison Huffman" /><meta property="og:locale" content="en_US" /><meta name="description" content="A Bold New Frontier As part of Microsoft’s Edge’s move to using Chromium as the backbone of our browsers, we are updating all our browser product lines, including the iOS version. As security engineers on the Microsoft Edge team, one of our responsibilities is reviewing code that could potentially impact the security of the browser. This includes any changes to areas that have been prone to bugs in the past such as the addition of new Mojo interfaces." /><meta property="og:description" content="A Bold New Frontier As part of Microsoft’s Edge’s move to using Chromium as the backbone of our browsers, we are updating all our browser product lines, including the iOS version. As security engineers on the Microsoft Edge team, one of our responsibilities is reviewing code that could potentially impact the security of the browser. This includes any changes to areas that have been prone to bugs in the past such as the addition of new Mojo interfaces." /><link rel="canonical" href="https://microsoftedge.github.io/edgevr/posts/Hacking-Chrome-iOS/" /><meta property="og:url" content="https://microsoftedge.github.io/edgevr/posts/Hacking-Chrome-iOS/" /><meta property="og:site_name" content="Microsoft Browser Vulnerability Research" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-10-16T09:00:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="iOS Chromium Overlooked and Underappreciated" /><meta name="twitter:site" content="@MSEdgeDev" /><meta name="twitter:creator" content="@Alison Huffman" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Alison Huffman"},"description":"A Bold New Frontier As part of Microsoft’s Edge’s move to using Chromium as the backbone of our browsers, we are updating all our browser product lines, including the iOS version. As security engineers on the Microsoft Edge team, one of our responsibilities is reviewing code that could potentially impact the security of the browser. This includes any changes to areas that have been prone to bugs in the past such as the addition of new Mojo interfaces.","url":"https://microsoftedge.github.io/edgevr/posts/Hacking-Chrome-iOS/","@type":"BlogPosting","headline":"iOS Chromium Overlooked and Underappreciated","dateModified":"2020-10-16T09:00:00-07:00","datePublished":"2020-10-16T09:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://microsoftedge.github.io/edgevr/posts/Hacking-Chrome-iOS/"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/edgevr/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/edgevr/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/edgevr/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/edgevr/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/edgevr/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/edgevr/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/edgevr/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/edgevr/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/edgevr/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/edgevr/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/edgevr/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/edgevr/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/edgevr/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/edgevr/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/edgevr/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/edgevr/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/edgevr/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/edgevr/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/edgevr/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/edgevr/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/edgevr/assets/css/post.css"><link rel="stylesheet" href="/edgevr/assets/css/post.css"><link rel="preload" as="style" href="/edgevr/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/edgevr/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <script type="text/javascript"> (function(c,l,a,r,i,t,y){ c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)}; t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i; y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y); })(window, document, "clarity", "script", "4xpt5cebre"); </script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/edgevr/assets/js/post.min.js" async></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script> <script src="/edgevr/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/edgevr/" alt="avatar"> <img src="/edgevr/assets/img/edge-logo-128x128.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/edgevr/">Microsoft Browser <b>Vulnerability Research</b></a></div><div class="site-subtitle font-italic">News from the lab</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/edgevr/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/edgevr/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/edgevr/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/edgevr/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper" style="margin-right: 9px;"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border" style="display:none;"></span> <a href="https://github.com/MicrosoftEdge" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="/edgevr/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/edgevr/"> Posts </a> </span> <span>iOS Chromium Overlooked and Underappreciated</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>iOS Chromium Overlooked and Underappreciated</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Oct 16, 2020, 9:00 AM -0700" > Oct 16, 2020 <i class="unloaded">2020-10-16T09:00:00-07:00</i> </span> by <span class="author"> Alison Huffman <a href="https://twitter.com/ohnonull" title="Author's Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> </span></div><div> Updated <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Tue, Nov 10, 2020, 4:48 PM -0800" > Nov 10, 2020 <i class="unloaded">2020-11-10T16:48:56-08:00</i> </span></div></div><div class="post-content"><h1 id="a-bold-new-frontier">A Bold New Frontier</h1><p>As part of Microsoft’s Edge’s move to using Chromium as the backbone of our browsers, we are updating all our browser product lines, including the iOS version. As security engineers on the Microsoft Edge team, one of our responsibilities is reviewing code that could potentially impact the security of the browser. This includes any changes to areas that have been prone to bugs in the past such as the addition of new Mojo interfaces.</p><p>When the security team first met with the engineers in charge of making iOS Edge a reality, we were unsure on what recommendations to make. Nobody on the team had experience looking for bugs in Chromium on iOS. It’s just a wrapper around WebKit right? The developers cannot possibly add any bugs we need to worry about…right?</p><p>Unfortunately, the answer is no they can.</p><p>In the first part of this blog post series, I will be providing a quick introduction to the iOS Chromium browser and the potential attack surface of the JavaScript interprocess communication (IPC) provided by <a href="https://developer.apple.com/documentation/webkit/wkwebview"><code class="language-plaintext highlighter-rouge">WKWebView</code></a>. I will also talk about a UXSS bug that I found while exploring this area of the code.</p><h1 id="dont-blink">Don’t Blink</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://microsoftedge.github.io/edgevr/assets/img/blog_img/ios/angel.png" alt="A weeping angel from the Doctor Who series" align="right" /> Unlike the desktop version of the Chromium browser, which uses V8 for its JavaScript engine and Blink for its rendering and WebAPI support, the iOS version of the Chromium does not. In fact, most likely all third-party browsers on iOS use the built-in <code class="language-plaintext highlighter-rouge">WKWebView</code> API to add web support to their application. Chromium is no exception. The reason for this is the code signing restrictions on the iOS platform and Apple’s unwillingness to allow developers to submit apps with the dynamic-codesigning entitlement enabled. This entitlement in particular is what would allow applications to map RWX memory. This capability would allow the implementation of an efficient JavaScript engine. Rather than having Chromium suffer from subpar performance on the platform it’s better to just use a <code class="language-plaintext highlighter-rouge">WKWebView</code> like every other browser.</p><h1 id="ipc">IPC</h1><p>One unfortunate side effect of using a <code class="language-plaintext highlighter-rouge">WKWebView</code> versus your own rendering and JavaScript engine, is you can no longer make direct modifications to the underlying code. This means you cannot directly expose new native features to websites. The <code class="language-plaintext highlighter-rouge">WKWebView</code> API remedies this through the <a href="https://developer.apple.com/documentation/webkit/wkusercontentcontroller"><code class="language-plaintext highlighter-rouge">WKUserContentController</code></a> object. This object can be passed in along during the creation of your <code class="language-plaintext highlighter-rouge">WKWebView</code> object through a <a href="https://developer.apple.com/documentation/webkit/wkwebviewconfiguration"><code class="language-plaintext highlighter-rouge">WKWebViewConfiguration</code></a> object.</p><p>This object can be used to not only inject JavaScript <strong>directly</strong> into a webpage but also expose native or objective-c code through JavaScript. These JavaScript interfaces are exposed through the <code class="language-plaintext highlighter-rouge">window.webkit.messageHandlers</code> object and support calls through a postMessage interface. At the time of writing this blog post, there are four message handlers available through every webpage. The easiest way to find these is to grep the code for “setScriptMessageHandler”.</p><ul><li><code class="language-plaintext highlighter-rouge">window.webkit.messageHandlers.FrameBecameAvailable.postMessage(...)</code></li><li><code class="language-plaintext highlighter-rouge">window.webkit.messageHandlers.FrameBecameUnavailable.postMessage(...)</code></li><li><code class="language-plaintext highlighter-rouge">window.webkit.messageHandlers.crwebinvoke.postMessage(...)</code></li><li><code class="language-plaintext highlighter-rouge">window.webkit.messageHandlers.FindElementResultHandler.postMessage(...)</code></li></ul><p><strong>Frame Handlers</strong></p><p>Let’s discuss the first two message handlers as a pair. These are the handlers that control the creation and destruction of the <a href="https://source.chromium.org/chromium/chromium/src/+/master:ios/web/js_messaging/web_frame_impl.mm"><code class="language-plaintext highlighter-rouge">WebFrameImpl</code></a> object. This object’s sole responsibility is to manage the IPC communications between the browser process and the frames within a page. Internally, these objects are managed by the <a href="https://source.chromium.org/chromium/chromium/src/+/master:ios/web/js_messaging/web_frames_manager_impl.mm"><code class="language-plaintext highlighter-rouge">WebFramesManagerImpl</code></a> which is owned by a <a href="https://source.chromium.org/chromium/chromium/src/+/master:ios/web/web_state/web_state_impl.mm"><code class="language-plaintext highlighter-rouge">WebStateImpl</code></a>. The <code class="language-plaintext highlighter-rouge">WebStateImpl</code> object is the main object that represents a tab and its equivalent on the desktop is the <a href="https://source.chromium.org/chromium/chromium/src/+/master:content/public/browser/web_contents.h"><code class="language-plaintext highlighter-rouge">WebContents</code></a> object.</p><div style="text-align:center"> <img alt="A picture of a couple with the Chromium logo for heads infinitely recursing into a picture frame." src="https://microsoftedge.github.io/edgevr/assets/img/blog_img/ios/webframes.jpg" /><div style="margin:10px 0px; font-weight: bold;">A happy WebFrameImpl family</div></div><p>Unlike the desktop version of Chromium, where objects like the <code class="language-plaintext highlighter-rouge">RenderFrameHost</code> are tightly coupled with the lifetime of frames, the lifetime of the <code class="language-plaintext highlighter-rouge">WebFrameImpl</code> objects are completely controlled by JavaScript. If a webpage is randomly calling <code class="language-plaintext highlighter-rouge">FrameBecameAvailable</code> or <code class="language-plaintext highlighter-rouge">FrameBecameUnavailable</code>, a frame may not have a corresponding <code class="language-plaintext highlighter-rouge">WebFrameImpl</code> object or it may have ten. I will mention that I have not noticed any memory safety issues caused by this API being exposed and usable in this way.</p><p>These handlers are normally invoked through the code in the <a href="https://source.chromium.org/chromium/chromium/src/+/master:ios/web/js_messaging/resources/">//ios/web/js_message/resources</a> directory.</p><p>To create a <code class="language-plaintext highlighter-rouge">WebFrameImpl</code> object the following snippet is all that’s needed.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">webkit</span><span class="p">.</span><span class="nx">messageHandlers</span><span class="p">.</span><span class="nx">FrameBecameAvailable</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">crwFrameId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">a8ffcfb8a97236ee42bff55184584ba8</span><span class="dl">"</span><span class="p">,</span> <span class="cm">/* frame identifier */</span>
  <span class="dl">"</span><span class="s2">crwFrameKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=</span><span class="dl">"</span><span class="p">,</span> <span class="cm">/* sub-frame message encryption key */</span>
  <span class="dl">"</span><span class="s2">crwFrameLastReceivedMessageId</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span> <span class="cm">/* reply message ID counter */</span>
<span class="p">});</span>
</pre></table></code></div></div><p>To destroy a <code class="language-plaintext highlighter-rouge">WebFrameImpl</code> object the following snippet will suffice.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">webkit</span><span class="p">.</span><span class="nx">messageHandlers</span><span class="p">.</span><span class="nx">FrameBecameUnavailable</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="dl">"</span><span class="s2">a8ffcfb8a97236ee42bff55184584ba8</span><span class="dl">"</span><span class="p">)</span>
</pre></table></code></div></div><p>In the snippet above, the only thing needed to destroy a frame’s <code class="language-plaintext highlighter-rouge">WebFrameImpl</code> object is its identifier. These identifiers, with the exception of the main frame’s, are not secret.</p><p>This is because if the native side of the browser wants to execute JavaScript inside a subframe, it will first route the message through the main frame. This is done by calling the <a href="https://source.chromium.org/chromium/chromium/src/+/ff136563a019342bb27060535e18cce9d57f7099:ios/web/js_messaging/web_frame_impl.mm;l=121"><code class="language-plaintext highlighter-rouge">WebFrameImpl::CallJavaScriptFunction</code></a> method. This method uses the target frame’s encryption key to encrypt the function name and parameters and then injects a call to <a href="https://source.chromium.org/chromium/chromium/src/+/ff136563a019342bb27060535e18cce9d57f7099:ios/web/js_messaging/resources/message.js;l=375"><code class="language-plaintext highlighter-rouge">__gCrWeb.message.routeMessage</code></a> into the page’s main frame. The receiving frame then checks the target frame field in the message against its own frame ID. If it does not match, it loops through all child frames and re-posts the message. Eventually the message will make its way to the correct child frame and it will decrypt the message and invoke the desired function. The reason sub-frame frame IDs are not secret, is because any child frame can install a message listener and examine the target frame ID field of the messages that pass through it.</p><p>The way these <code class="language-plaintext highlighter-rouge">routeMessage</code> calls are constructed combined with an oversight in the <code class="language-plaintext highlighter-rouge">FrameBecameAvailable</code> handler actually led to a fairly serious bug. When injecting the <code class="language-plaintext highlighter-rouge">routeMessage</code> call into the main frame the following code was used.</p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">script</span> <span class="o">=</span>
    <span class="n">base</span><span class="o">::</span><span class="n">StringPrintf</span><span class="p">(</span><span class="s">"__gCrWeb.message.routeMessage(%s, %s, '%s')"</span><span class="p">,</span>
                       <span class="n">encrypted_message_json</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span>
                       <span class="n">encrypted_function_json</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">frame_id_</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="n">GetWebState</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">ExecuteJavaScript</span><span class="p">(</span><span class="n">base</span><span class="o">::</span><span class="n">UTF8ToUTF16</span><span class="p">(</span><span class="n">script</span><span class="p">));</span>
</pre></table></code></div></div><p>As one can see the script is constructed using a format string using <code class="language-plaintext highlighter-rouge">encrypted_message_json</code>, <code class="language-plaintext highlighter-rouge">encrypted_function_json</code>, and the <code class="language-plaintext highlighter-rouge">frame_id_</code> member of the <code class="language-plaintext highlighter-rouge">WebFrameImpl</code>. Originally, the <code class="language-plaintext highlighter-rouge">frame_id_</code> member had no limitations on the name you could provide. Due to this, a child frame could execute the following code:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">webkit</span><span class="p">.</span><span class="nx">messageHandlers</span><span class="p">.</span><span class="nx">FrameBecameAvailable</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
  <span class="dl">'</span><span class="s1">crwFrameId</span><span class="dl">'</span><span class="p">:</span> <span class="dl">"</span><span class="s2">'foobar');alert(window['origin']+'</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">crwFrameKey</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">crwFrameLastReceivedMessageId</span><span class="dl">'</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">});</span>
</pre></table></code></div></div><p>This would cause a new <code class="language-plaintext highlighter-rouge">WebFrameImpl</code> to be created with a frame ID of <code class="language-plaintext highlighter-rouge">foobar');alert(window['origin']+'</code>. Upon the creation of the frame, the browser would try to route a message to it. Specifically, it would try to get the form information from the frame for autofill. Since JavaScript is injected into the main frame this would end in the following code running in the main frame:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">__gCrWeb</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">routeMessage</span><span class="p">(</span><span class="dl">'</span><span class="s1">XXXXXX</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">XXXXXX</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">foobar</span><span class="dl">'</span><span class="p">);</span><span class="nx">alert</span><span class="p">(</span><span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">origin</span><span class="dl">'</span><span class="p">]</span><span class="o">+</span><span class="dl">''</span><span class="p">)</span>
</pre></table></code></div></div><p>The impact of this bug is it enabled a UXSS from a child frame, such as one hosting an advertisement, and allows the frame to run arbitrary JavaScript in the webpage hosting the frame. This bug was <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1098606">reported</a> and promptly had a <a href="https://chromium.googlesource.com/chromium/src.git/+/37bccc228e1089bb07e37c9137bd03437b7c4de7">fix</a> made within two days. The fix itself was simple and ensures that frame IDs only contain hex digits (0-9 and A-F).</p><p><strong>crwebinvoke</strong></p><p>The <code class="language-plaintext highlighter-rouge">crwebinvoke</code> handler is used for handling messages tied to the <code class="language-plaintext highlighter-rouge">WebState</code> object of a tab. These handlers are added by calling <code class="language-plaintext highlighter-rouge">WebStateImpl::AddScriptCommandCallBack</code> and the callbacks themselves have the following signature.</p><div class="language-objc highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">const</span> <span class="n">web</span><span class="o">::</span><span class="n">WebState</span><span class="o">::</span><span class="n">ScriptCommandCallback</span> <span class="n">callback</span> <span class="o">=</span> <span class="n">base</span><span class="o">::</span><span class="n">BindRepeating</span><span class="p">(</span>
  <span class="o">^</span><span class="p">(</span><span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">DictionaryValue</span><span class="o">&amp;</span> <span class="n">content</span><span class="p">,</span> <span class="k">const</span> <span class="n">GURL</span><span class="o">&amp;</span> <span class="n">mainDocumentURL</span><span class="p">,</span>
    <span class="n">bool</span> <span class="n">userInteracting</span><span class="p">,</span> <span class="n">web</span><span class="o">::</span><span class="n">WebFrame</span><span class="o">*</span> <span class="n">senderFrame</span><span class="p">)</span> <span class="p">{</span>
  	<span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Something interesting about the fourth argument of <code class="language-plaintext highlighter-rouge">ScriptCommandCallback</code> <code class="language-plaintext highlighter-rouge">senderFrame</code> is that it is totally dependent on what ID is passed in the <code class="language-plaintext highlighter-rouge">crwFrameId</code> field of the message. This combined with the fact that frame ID’s of child frames can be leaked could be a recipe for bugs in the future. Currently, I have not noticed this behavior causing any issues. It is worth noting that many callbacks will do something similar to <code class="language-plaintext highlighter-rouge">if(sender_frame-&gt;IsMainFrame())</code> before doing certain operations. This means that if you can somehow leak the 128-bit value that represents the main frame ID you would be able to impersonate the main frame. I fortunately did not notice any ways to do this.</p><p>Just as an example of this interface, and unrelated to any security issues, is the code that handles the <a href="https://source.chromium.org/chromium/chromium/src/+/master:ios/chrome/browser/web/print_tab_helper.mm"><code class="language-plaintext highlighter-rouge">window.print</code></a> call.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">msg</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nx">msg</span><span class="p">[</span><span class="dl">"</span><span class="s2">command</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">print.print</span><span class="dl">"</span>
<span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="p">{</span><span class="dl">'</span><span class="s1">crwCommand</span><span class="dl">'</span><span class="p">:</span> <span class="nx">msg</span><span class="p">,</span>
               <span class="dl">'</span><span class="s1">crwFrameId</span><span class="dl">'</span><span class="p">:</span> <span class="nx">__gCrWeb</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">getFrameId</span><span class="p">()}</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">webkit</span><span class="p">.</span><span class="nx">messageHandlers</span><span class="p">.</span><span class="nx">crwebinvoke</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</pre></table></code></div></div><p>If you execute the above code in a webpage, then the print dialogue will open.</p><p>Another functionality that the <code class="language-plaintext highlighter-rouge">crwebinvoke</code> interface provides is a channel to send results from injected JavaScript calls. Whenever a method is invoked through <code class="language-plaintext highlighter-rouge">routeMessage</code> the browser internally adds a callback handler to a <a href="https://source.chromium.org/chromium/chromium/src/+/91d5a91b0fbf1a13d17d9745696d719ff01056a2:ios/web/js_messaging/web_frame_impl.mm;l=181">list</a>. These handlers can be reached by sending a <code class="language-plaintext highlighter-rouge">frameMessaging_&lt;FRAME ID&gt;.reply</code> <a href="https://source.chromium.org/chromium/chromium/src/+/cab7381283bebbc4d3fe64b3dfa81d5b3e418cdd:ios/web/js_messaging/resources/message.js;l=205">command</a>. The string <code class="language-plaintext highlighter-rouge">FRAME ID</code> should be replaced with the frame ID of the frame that was originally sent the request. Since the <code class="language-plaintext highlighter-rouge">WKWebView</code> does not expose direct access to the DOM of the webpage this functionality is typically used to retrieve information about the contents of the page.</p><p>One potential issue with this implementation detail is that all that is needed to forge replies is the knowledge of the frame ID that sent the request and the message ID of the request. The message ID as it turns out is just an incrementing 32-bit integer from the <code class="language-plaintext highlighter-rouge">crwFrameLastReceivedMessageId</code> parameter of when the frame was created. For new frames, this message ID starts at zero. This means that any child frame can theoretically forge the callbacks of any other child frame. However, I have not noticed any exploitable issues with subframe messages yet.</p><p><strong>FindElementResultHandler</strong></p><p>Finally, the <code class="language-plaintext highlighter-rouge">FindElementResultHandler</code> handler is responsible for informing the browser of the HTML element that is being touched. Whenever a webpage is touched the browser will inject a call to <code class="language-plaintext highlighter-rouge">__gCrWeb.findElementAtPoint</code> in the main frame. When <code class="language-plaintext highlighter-rouge">findElementAtPoint</code> detects the touched element is in a sub-frame of a differing origin, a message is posted to the child frame so it can handle informing the browser. This is used to generate the long-press context menu and is implemented in the <a href="https://source.chromium.org/chromium/chromium/src/+/master:ios/web/web_state/ui/crw_context_menu_controller.mm"><code class="language-plaintext highlighter-rouge">CRWContextMenuController</code></a> class.</p><h1 id="closing">Closing</h1><p>I hope by outlining the available attack surface within the IPC of the browser other researchers can give it the attention it deserves. While most of the concepts discussed in this article pertain specifically to Chromium based iOS browsers, all <code class="language-plaintext highlighter-rouge">WKWebView</code> consumers have access to the <code class="language-plaintext highlighter-rouge">messageHandler</code> functionality. It is a great first place to look when doing an audit of a <code class="language-plaintext highlighter-rouge">WKWebView</code> based browser. While looking at the iOS version of Chromium, I discovered multiple issues, some of which are still being fixed. Once the issues are fixed, I hope to post an entry about them on this blog.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/edgevr/categories/vulnerabilities/'>Vulnerabilities</a>, <a href='/edgevr/categories/exploit/'>Exploit</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/edgevr/tags/ios/" class="post-tag no-text-decoration" >iOS</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS Chromium Overlooked and Underappreciated - Microsoft Browser Vulnerability Research&url=https://microsoftedge.github.io/edgevr/posts/Hacking-Chrome-iOS/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=iOS Chromium Overlooked and Underappreciated - Microsoft Browser Vulnerability Research&u=https://microsoftedge.github.io/edgevr/posts/Hacking-Chrome-iOS/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=iOS Chromium Overlooked and Underappreciated - Microsoft Browser Vulnerability Research&url=https://microsoftedge.github.io/edgevr/posts/Hacking-Chrome-iOS/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://microsoftedge.github.io/edgevr/posts/Hacking-Chrome-iOS/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/edgevr/posts/Introducing-Enhanced-Security-for-Microsoft-Edge/">Introducing Enhanced Security for Microsoft Edge</a></li><li><a href="/edgevr/posts/Super-Duper-Secure-Mode/">Super Duper Secure Mode</a></li><li><a href="/edgevr/posts/attacking-the-devtools/">Guest Blog Post - Attacking the DevTools</a></li><li><a href="/edgevr/posts/eliminating-xss-with-trusted-types/">Eliminating XSS from WebUI with Trusted Types</a></li><li><a href="/edgevr/posts/Hacking-Chrome-iOS/">iOS Chromium Overlooked and Underappreciated</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/edgevr/tags/tips/">tips</a> <a class="post-tag" href="/edgevr/tags/site-isolation/">Site Isolation</a> <a class="post-tag" href="/edgevr/tags/jit/">JIT</a> <a class="post-tag" href="/edgevr/tags/ios/">iOS</a> <a class="post-tag" href="/edgevr/tags/fuzzing/">fuzzing</a> <a class="post-tag" href="/edgevr/tags/ui/">UI</a> <a class="post-tag" href="/edgevr/tags/trusted-types/">Trusted Types</a> <a class="post-tag" href="/edgevr/tags/memory-corruption/">Memory Corruption</a> <a class="post-tag" href="/edgevr/tags/headlines/">Headlines</a> <a class="post-tag" href="/edgevr/tags/devtools/">DevTools</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/edgevr/posts/yet-another-uaf/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Mar 2, 2021 <i class="unloaded">2021-03-02T08:00:00-08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Yet another RenderFrameHostImpl UAF</h3><div class="text-muted small"><p> Introduction Back in 2020 while reviewing Chromium code, I found issue 1068395, a Use-After-Free in Browser Process that can be used to escape the Chromium sandbox on Android Devices. This is an i...</p></div></div></a></div><div class="card"> <a href="/edgevr/posts/attacking-the-devtools/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Jul 21, 2021 <i class="unloaded">2021-07-21T09:00:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Guest Blog Post - Attacking the DevTools</h3><div class="text-muted small"><p> In this post, we’ve invited David Erceg, one of the participants in the Edge bug bounty program, to talk about interesting bugs he found in Edge. By sharing this information, we hope more security...</p></div></div></a></div><div class="card"> <a href="/edgevr/posts/memory-corruption-vulnerabilities-in-edge/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Oct 17 <i class="unloaded">2022-10-17T09:00:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Guest Blog Post - Memory corruption vulnerabilities in Edge</h3><div class="text-muted small"><p> Introduction Memory corruption issues in the browser process are typically some of the most severe issues in Chromium and browsers that are based off it. Such issues can include use-after-free (UA...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/edgevr/posts/Introducing-Edge-Vulnerability-Research/" class="btn btn-outline-primary"><p>Introducing Edge Vulnerability Research</p></a> <a href="/edgevr/posts/deep-dive-into-site-isolation-part-1/" class="btn btn-outline-primary"><p>Deep Dive into Site Isolation (Part 1)</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/MSEdgeDev">Microsoft Corporation</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/edgevr/tags/tips/">tips</a> <a class="post-tag" href="/edgevr/tags/site-isolation/">Site Isolation</a> <a class="post-tag" href="/edgevr/tags/jit/">JIT</a> <a class="post-tag" href="/edgevr/tags/ios/">iOS</a> <a class="post-tag" href="/edgevr/tags/fuzzing/">fuzzing</a> <a class="post-tag" href="/edgevr/tags/ui/">UI</a> <a class="post-tag" href="/edgevr/tags/trusted-types/">Trusted Types</a> <a class="post-tag" href="/edgevr/tags/memory-corruption/">Memory Corruption</a> <a class="post-tag" href="/edgevr/tags/headlines/">Headlines</a> <a class="post-tag" href="/edgevr/tags/devtools/">DevTools</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/edgevr/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://microsoftedge.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
